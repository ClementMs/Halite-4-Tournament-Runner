import mongoose from 'mongoose';
import { Plugin } from '../../Plugin';
import { Database } from '../../Plugin/Database';
import { Dimension, NanoID } from '../../Dimension';
import { Match } from '../../Match';
import { DeepPartial } from '../../utils/DeepPartial';
import { Tournament } from '../../Tournament';
import { nanoid } from '../..';
import { Ladder } from '../../Tournament/Ladder';
import { TournamentStatus } from '../../Tournament/TournamentStatus';
export declare class MongoDB extends Database {
    name: string;
    type: Plugin.Type;
    db: mongoose.Connection;
    models: MongoDB.Models;
    /** The MongoDB connection string used to connect to the database and read/write to it */
    connectionString: string;
    constructor(connectionString: string, configs?: DeepPartial<Database.Configs>);
    /**
     * Connects to the mongo database and returns the Connection object
     */
    connect(): Promise<mongoose.Connection>;
    initialize(dimension: Dimension): Promise<void>;
    storeMatch(match: Match, governID: nanoid): Promise<any>;
    getMatch(id: NanoID): Promise<mongoose.Document>;
    getPlayerMatches(playerID: nanoid, governID: nanoid, offset?: number, limit?: number, order?: number): Promise<Array<Match>>;
    getRanks(tournament: Tournament.Ladder, offset: number, limit: number): Promise<Array<Ladder.PlayerStat>>;
    registerUser(username: string, password: string, userData?: any): Promise<mongoose.Document>;
    /**
     * Gets user information. If public is false, will retrieve all information other than password
     * @param usernameOrID
     */
    getUser(usernameOrID: string, publicView?: boolean): Promise<Plugin.Database.User>;
    loginUser(username: string, password: string): Promise<string>;
    updateUser(usernameOrID: string, update: Partial<Database.User>): Promise<any>;
    deleteUser(usernameOrID: string): Promise<void>;
    verifyToken(jwt: string): Promise<any>;
    isAdmin(user: Database.PublicUser): boolean;
    getUsersInTournament(tournamentKey: string, offset?: number, limit?: number): Promise<any[]>;
    manipulate(dimension: Dimension): Promise<void>;
    storeTournamentConfigs(tournamentID: nanoid, tournamentConfigs: Tournament.TournamentConfigsBase, status: TournamentStatus): Promise<any>;
    getTournamentConfigsModificationDate(tournamentID: nanoid): Promise<Date>;
    getTournamentConfigs(tournamentID: nanoid): Promise<any>;
}
export declare module MongoDB {
    /**
     * See {@link Match} class for what these fields represent. They are copied here letter for letter. If set true, the
     * field will be included into the database
     */
    interface MatchSchemaOptions {
        state: boolean;
        results: boolean;
        creationDate: boolean;
        finishDate: boolean;
        agents: boolean;
    }
    /**
     * User Schema Options. If set to true, that field will be included into the database.
     */
    interface UserSchemaOptions {
        /** Creation date of the user */
        creationDate: boolean;
    }
    interface Models {
        user: mongoose.Model<mongoose.Document, {}>;
        match: mongoose.Model<mongoose.Document, {}>;
        tournamentConfigs: mongoose.Model<mongoose.Document, {}>;
    }
}
